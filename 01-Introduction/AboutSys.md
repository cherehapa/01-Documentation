# Общие сведения об API
## Назначение и основной фунционал
API проекта "Черехапа страхование" - универсальное решение для работы с туристическими страховыми продуктами в 13 страховых компаниях (список компаний растет). API позволяет:
- Расчитывать стоимость страховых продуктов по обозначенным условиям страхования
- Сравнивать и ранжировать страховые продукты разных страховых компаний
- Выписывать и загружать страховые полисы в электронном виде
- Принимать оплату от пользователя
- Отменять ранее выписанные полисы и осуществлять возврат денежных средств

API построен в соответствии с архитектурным стилем RESTful и удобен в использовании как в серверных приложениях, так и во фронтенд-интерфейсе. Поддерживаются несколько форматов данных (JSON, XML), фильтрация данных.

## Схема работы с API
Два основных действия, расчет (quote) и выписка (policy) страховых полисов осуществляются отдельными запросами со схожими параметрами. Некоторые передаваемые в этих запросах параметры содержат специфические коды объектов (страховых продуктов, стран, платежных систем и пр.), получить которые можно из предоставляемых API справочников:
- стран
- групп стран
- страховых компаний
- страховых услуг и рисков
- групп страховых услуг
- видов спорта
- страховых продуктов
- платежных систем
- сервисных компаний (ассистансов) *пока не реализован
Запрос на выписку страхового полиса становится в очередь на выполнение (процесс выписки в нормальных условиях занять несколько минут, в случае сбоев со стороны страховых компаний - до суток). Проверить текущий статус задачи можно при помощи специального метода API (task), либо получив уведомление на адрес, обозначенный в запросе на выписку.

## Взаимодействие с API состоит из следующих этапов:
- Получение и кэширование справочников
- Определение условий страхования (даты, направление поездки, необходимые страховые услуги)
- Расчет стоимости страховых продуктов и определение нужного кода страхового продукта
- Формирование заказа и прием оплаты от пользователя (может осуществляться на стороне "Черехапа страхование")
- Выписка страхового полиса по выбранному продукту
- Отправка страхового полиса и дополнительных сведений пользователю (может осуществляться на стороне "Черехапа страхование")

## Планы развития
- Доступ к заказам
- Доступ к данным пользователей
- Получение аналитических данных
- Добавление новых направлений страхования
